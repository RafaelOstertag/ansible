---

- name: FreeBSD Workstations
  hosts: freebsd_user_hosts
  force_handlers: true
  user: root
  tasks:
    - import_role:
        name: common/etcfiles
    - import_role:
        name: common/motd
    - import_role:
        name: freebsd/freebsd-update-cron
    - import_role:
        name: freebsd/resolvconf
    - import_role:
        name: freebsd/openldap-client-conf
    - import_role:
        name: freebsd/prefer-ipv6
    - import_role:
        name: freebsd/disable-default-pkgrepo
    - import_role:
        name: freebsd/set-security-level
      vars:
        enable_secure_level: False
        secure_level: "1"
    - import_role:
        name: freebsd/reusable/rcconf
      vars:
        rcvar: "clear_tmp_enable"
        value: "YES"
    - import_role:
        name: freebsd/reusable/rcconf
      vars:
        rcvar: "accounting_enable"
        value: "YES"
    - import_role:
        name: freebsd/reusable/rcconf
      vars:
        rcvar: "sshd_enable"
        value: "YES"
    - import_role:
        name: freebsd/reusable/rcconf
      vars:
        rcvar: "gssd_enable"
        value: "YES"
    - import_role:
        name: freebsd/reusable/rcconf
      vars:
        rcvar: "gssd_flags"
        value: "-h"
    - import_role:
        name: freebsd/reusable/rcconf
      vars:
        rcvar: "ip6addrctl_enable"
        value: "YES"
    - import_role:
        name: freebsd/reusable/rcconf
      vars:
        rcvar: "syslogd_flags"
        value: "-ss"
    - import_role:
        name: freebsd/reusable/rcconf
      vars:
        rcvar: "tcp_extensions"
        value: "YES"
    - import_role:
        name: freebsd/reusable/rcconf
      vars:
        rcvar: "sendmail_enable"
        value: "YES"
        
    - import_role:
        name:  freebsd/reusable/rcconf
      vars:
        rcvar: "ipv6_static_routes"
        value: "dmz6 web1"
    - import_role:
        name:  freebsd/reusable/rcconf
      vars:
        rcvar: "ipv6_route_dmz6"
        value: "-net fd3e:be3e:ec34:1:: -prefixlen 64 fd3e:be3e:ec34::2"
    - import_role:
        name: freebsd/reusable/rcconf
      vars:
        rcvar: "ipv6_route_web6"
        value: "-net fd3e:be3e:ec34:2:: -prefixlen 64 fd3e:be3e:ec34::2"
        
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "daily_status_disks_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "daily_status_disks_df_flags"
        value: "-h"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "daily_status_mailq_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "daily_status_ntpd_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "weekly_noid_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "daily_accounting_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "monthly_accounting_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "daily_status_security_portaudit_enable"
        value: "NO"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_pkgaudit_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_pkgaudit_period"
        value: "daily"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "daily_status_include_submit_mailq"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_chkmounts_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_chkmounts_period"
        value: "daily"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_chkuid0_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_chkuid0_period"
        value: "daily"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_logincheck_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_logincheck_period"
        value: "daily"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_kernelmsg_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_kernelmsg_period"
        value: "daily"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_loginfail_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_loginfail_period"
        value: "daily"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_tcpwrap_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_tcpwrap_period"
        value: "daily"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_chkportsum_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_chkportsum_period"
        value: "daily"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_neggrpperm_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_neggrpperm_period"
        value: "daily"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_passwdless_enable"
        value: "YES"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "security_status_passwdless_period"
        value: "daily"
    - import_role:
        name: freebsd/periodic
      vars:
        varname: "daily_status_network_enable"
        value: "YES"
    - import_role:
        name: freebsd/reusable/sysctl
      vars:
        varname: "security.bsd.see_other_uids"
        value: "1"
    - import_role:
        name: freebsd/reusable/sysctl
      vars:
        varname: "kern.randompid"
        value: "100"
    - import_role:
        name: freebsd/reusable/sysctl
      vars:
        varname: "vfs.usermount"
        value: "1"
    - import_role:
        name: freebsd/amanda-enable
    - import_role:
        name: common/amanda-client
    - import_role:
        name: freebsd/amanda-hosts
    - import_role:
        name: freebsd/kerberos
    - import_role:
        name: freebsd/ntp
    - import_role:
        name: freebsd/mailserver
    - import_role:
        name: freebsd/guengel-pkgrepo
      tags:
        - repo
    - import_role:
        name: common/ssh-keys
    - import_role:
        name: freebsd/sudo
    - import_role:
        name: freebsd/root-ssh-config
    - import_role:
        name: freebsd/procfs
    - import_role:
        name: freebsd/fdescfs
    - import_role:
        name: freebsd/gizmo-mounts
    - import_role:
        name: freebsd/enable-ldap-login
    - import_role:
        name: freebsd/zfs-scrub
      when: "enable_zfs_scrub"
    - import_role:
        name: freebsd/javacerts
      tags:
        - javacerts
