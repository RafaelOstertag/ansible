---

- name: Create syslog snippets dir
  file:
    path: "/usr/local/etc/syslog.d"
    state: directory
    mode: 0755
    owner: root
    group: wheel
  when: "(ansible_fqdn + '/syslog.d') is directory"

- name: Copy syslog snippets
  copy:
    src: "{{ item }}"
    dest: "/usr/local/etc/syslog.d/{{ item | basename }}"
    mode: 0660
    owner: root
    group: wheel
  with_fileglob:
    - "{{ ansible_fqdn }}/syslog.d/*.conf"
  notify:
  - Restart FreeBSD syslog

- name: Create syslog snippets dir
  file:
    path: "/usr/local/etc/newsyslog.conf.d"
    state: directory
    mode: 0755
    owner: root
    group: wheel
  when: "(ansible_fqdn + '/newsyslog.d') is directory" 

- name: Copy newsyslog snippets
  copy:
    src: "{{ item }}"
    dest: "/usr/local/etc/newsyslog.conf.d/{{ item | basename }}"
    mode: 0600
    owner: root
    group: wheel
  with_fileglob:
    - "{{ ansible_fqdn }}/newsyslog.d/*.conf"
  