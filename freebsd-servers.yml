---

- name: FreeBSD Servers
  hosts: freebsd-servers
  force_handlers: true
  user: root
  roles:
    - common/dotnetrc
    - { role: common/services, name: "amanda", prt: "10080", prot: "tcp" }
    - { role: common/services, name: "amanda", prt: "10080", prot: "udp" }
    - { role: common/services, name: "amandaidx", prt: "10082", prot: "tcp" }
    - { role: common/services, name: "amidxtape", prt: "10083", prot: "tcp" }
    - common/etcfiles
    - common/motd
    - freebsd/resolvconf
    - freebsd/openldap-client-conf
    - freebsd/prefer-ipv6
    - freebsd/disable-default-pkgrepo
    - { role: freebsd/rcconf, name: "kern_securelevel_enable", value: "YES" }
    - { role: freebsd/rcconf, name: "kern_securelevel", value: "1" }
    - { role: freebsd/rcconf, name: "nrpe2_enable", value: "YES" }
    - { role: freebsd/rcconf, name: "clear_tmp_enable", value: "YES" }
    - { role: freebsd/rcconf, name: "accounting_enable", value: "YES" }
    - { role: freebsd/rcconf, name: "inetd_enable", value: "YES" }
    - { role: freebsd/rcconf, name: "ntpdate_enable", value: "YES" }
    - { role: freebsd/rcconf, name: "ntpdate_hosts", value: "1.pool.ntp.org" }
    - { role: freebsd/rcconf, name: "ntpd_sync_on_start", value: "YES" }
    - { role: freebsd/rcconf, name: "sshd_enable", value: "YES" }
    - { role: freebsd/rcconf, name: "gssd_enable", value: "YES" }
    - { role: freebsd/rcconf, name: "gssd_flags", value: "-h" }
    - { role: freebsd/rcconf, name: "ip6addrctl_enable", value: "YES" }
    - { role: freebsd/rcconf, name: "syslogd_flags", value: "-ss" }
    - { role: freebsd/rcconf, name: "tcp_extensions", value: "YES" }
    - { role: freebsd/rcconf, name: "sendmail_enable", value: "YES" }
    - { role: freebsd/periodic, name: "daily_status_disks_enable", value: "YES" }
    - { role: freebsd/periodic, name: "daily_status_disks_df_flags", value: "-h" }
    - { role: freebsd/periodic, name: "daily_status_mailq_enable", value: "YES" }
    - { role: freebsd/periodic, name: "daily_status_ntpd_enable", value: "YES" }
    - { role: freebsd/periodic, name: "weekly_noid_enable", value: "YES" }
    - { role: freebsd/periodic, name: "daily_accounting_enable", value: "YES" }
    - { role: freebsd/periodic, name: "monthly_accounting_enable", value: "YES" }
    - { role: freebsd/periodic, name: "daily_status_security_portaudit_enable", value: "NO" }
    - { role: freebsd/periodic, name: "daily_status_security_pkgaudit_enable", value: "YES" }
    - { role: freebsd/periodic, name: "daily_status_include_submit_mailq", value: "YES" }
    - { role: freebsd/periodic, name: "security_status_chkmounts_enable", value: "YES" }
    - { role: freebsd/periodic, name: "security_status_chkmounts_period", value: "daily" }
    - { role: freebsd/periodic, name: "security_status_chkuid0_enable", value: "YES" }
    - { role: freebsd/periodic, name: "security_status_chkuid0_period", value: "daily" }
    - { role: freebsd/periodic, name: "security_status_logincheck_enable", value: "YES" }
    - { role: freebsd/periodic, name: "security_status_logincheck_period", value: "daily" }
    - { role: freebsd/periodic, name: "security_status_kernelmsg_enable", value: "YES" }
    - { role: freebsd/periodic, name: "security_status_kernelmsg_period", value: "daily" }
    - { role: freebsd/periodic, name: "security_status_loginfail_enable", value: "YES" }
    - { role: freebsd/periodic, name: "security_status_loginfail_period", value: "daily" }
    - { role: freebsd/periodic, name: "security_status_tcpwrap_enable", value: "YES" }
    - { role: freebsd/periodic, name: "security_status_tcpwrap_period", value: "daily" }
    - { role: freebsd/periodic, name: "security_status_chkportsum_enable", value: "YES" }
    - { role: freebsd/periodic, name: "security_status_chkportsum_period", value: "daily" }
    - { role: freebsd/periodic, name: "security_status_neggrpperm_enable", value: "YES" }
    - { role: freebsd/periodic, name: "security_status_neggrpperm_period", value: "daily" }
    - { role: freebsd/periodic, name: "security_status_passwdless_enable", value: "YES" }
    - { role: freebsd/periodic, name: "security_status_passwdless_period", value: "daily" }
    - { role: freebsd/periodic, name: "daily_status_network_enable", value: "YES" }
    - { role: freebsd/sysctl, name: "security.bsd.see_other_uids", value: "0" }
    - { role: freebsd/sysctl, name: "kern.randompid", value: "100" }
    - freebsd/aide
    - common/amanda-client
    - freebsd/amanda-hosts
    - freebsd/amanda-enable
    - common/crontab
    - freebsd/crontab
    - freebsd/kerberos
    - freebsd/openldap-server-schemas
    - freebsd/logwatch
    - freebsd/nagios-nrpe-config
