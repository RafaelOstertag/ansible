---
- name: OpenBSD | install package
  openbsd_pkg: name={{ item }} state=present
  environment:
    PKG_PATH: "ftp://mirror.switch.ch/pub/OpenBSD/{{ ansible_kernel }}/packages/{{ ansible_machine }}/"
  with_items:
    - firefox
    - thunderbird
    - xombrero
    - xfce
    - xfwm4-themes
    - xfce4-icon-theme
    - subversion
    - python
    - tokyocabinet
    - git
    - cups
    - gmake
    - login_ldap
    - wget
    - geany
    - anjuta
    - emacs-24.5p2-gtk3
    - mutt-1.5.24p5v0
    - gnupg-2.1.9
    - jdk-1.8.0.72v0

    
- name: OpenBSD | enable portmap
  lineinfile: dest=/etc/rc.conf.local regexp="^portmap_flags" line="portmap_flags=\"\""

- name: OpenBSD | enable inetd
  lineinfile: dest=/etc/rc.conf.local regexp="^inetd_flags" line="inetd_flags=\"\""
  notify:
    - Restart OpenBSD inetd

- name: OpenBSD | enable package scripts dbus_daemon
  lineinfile: dest=/etc/rc.conf.local regexp="^dbus_daemon" line="dbus_daemon="

- name: OpenBSD | enable package scripts avahi_daemon
  lineinfile: dest=/etc/rc.conf.local regexp="^avahi_daemon" line="avahi_daemon="

- name: OpenBSD | enable package scripts cupsd
  lineinfile: dest=/etc/rc.conf.local regexp="^cupsd" line="cupsd="

- name: OpenBSD | enable package scripts cups_browsed
  lineinfile: dest=/etc/rc.conf.local regexp="^cups_browsed" line="cups_browsed="

